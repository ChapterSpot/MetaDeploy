// Steps
// =====

#plan-steps-table {
  // Borders are added by parent .slds-card
  border: none;

  // set up layout
  tr {
    display: grid;
    grid-template-columns: [step-row-start name-start] 4fr [name-end type-start] 2fr [type-end badge-start] 1fr [badge-end install-start] auto [install-end step-row-end];

    @media (min-width: $mq-large) {
      grid-template-columns: [step-row-start name-start] 4fr [name-end type-start] 1fr [type-end badge-start] 1fr [badge-end install-start] 1fr [install-end step-row-end];
    }

    &:focus,
    &:hover {
      > td:not(.slds-is-selected),
      > th:not(.slds-is-selected) {
        box-shadow: none;
      }
    }
  }

  .slds-accordion__section {
    padding: 0;
  }

  .slds-accordion__summary-heading {
    font-size: $font-size-medium;
  }

  .step-column-tooltip {
    text-transform: none;
    letter-spacing: 0;
  }

  .step-name-no-icon {
    // Line up text of step names, with or without accordion icon:
    // .slds-button__icon width (0.875rem) + margin-right ($spacing-x-small)
    margin-left: 1.375rem;
  }

  .has-warning {
    border-left: $spacing-medium solid $color-border-warning;
    padding-left: $spacing-x-small;
  }

  .has-error {
    border-left: $spacing-medium solid $color-border-error;
    padding-left: $spacing-x-small;
  }

  .plan-step-item {
    padding-bottom: $var-spacing-small;
    padding-top: $var-spacing-small;

    &.is-installing {
      background-color: $color-background-row-selected;
    }
  }

  .plan-step-item-name {
    grid-column: name-start / step-row-end;
    grid-row: 1 / 3;
  }

  .plan-step-name {
    align-items: flex-end;
    display: flex;
  }

  .plan-step-type {
    grid-column: type-start / type-end;
    grid-row: 1;

    // aligns the type text with other cell text
    > div {
      align-items: baseline;
      display: flex;

      // center the type icon to the label only
      span:first-child {
        align-self: center;
        display: flex;
      }
    }
  }

  .plan-step-badge-container {
    grid-column: badge-start / badge-end;
    grid-row: 1;
    // decreasing container padding for better vertical alignment
    // badges have more internal padding
    padding-bottom: 0;
    padding-top: 0.625rem;

    div {
      display: flex;
    }
  }

  .slds-badge_lightest {
    background-color: $color-background-highlight;
  }

  .plan-step-options {
    grid-column: install-start / install-end;
    grid-row: 1;

    // Completed icon is larger than others. Negative indent helps alignment
    .is-completed {
      margin-top: -0.3125rem;
      margin-bottom: -0.3125rem;
    }
  }

  section:not(.slds-is-open) > .slds-accordion__content {
    width: 0;
  }

  .slds-is-open > .slds-accordion__content {
    background: $brand-dark;
    color: $color-text-brand-primary;
    margin-bottom: $spacing-small * -1;
    margin-left: $spacing-large * -1;
    // full width of the page minus padding ===
    // full width of table so scroll goes edge to edge
    margin-top: 1.25rem;
    overflow: auto;
    width: calc(100vw - 4rem);
  }

  pre {
    margin-bottom: 0;
    padding: $spacing-medium $spacing-large $spacing-large;
  }
}
